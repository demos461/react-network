(this["webpackJsonpreact-network"]=this["webpackJsonpreact-network"]||[]).push([[0],{17:function(e,t,a){e.exports={profileInfo:"ProfileInfo_profileInfo__1XvmN",lookingForAJob:"ProfileInfo_lookingForAJob__23dTc",lookingForAJobDescription:"ProfileInfo_lookingForAJobDescription__BlOpS",avatar:"ProfileInfo_avatar__1oSFy",fullName:"ProfileInfo_fullName__2lN32",aboutMe:"ProfileInfo_aboutMe__nI-zm",contacts:"ProfileInfo_contacts__1u3DL",status:"ProfileInfo_status__QNhP2",statusInput:"ProfileInfo_statusInput__1-QTl"}},22:function(e,t,a){e.exports={nav:"Navbar_nav__23nsD",nav_item:"Navbar_nav_item__5RYrE",active:"Navbar_active__3N3nF"}},23:function(e,t,a){e.exports={user:"Users_user__2xg2a",userName:"Users_userName__2HoWM",userStatus:"Users_userStatus__3kLul",userLocation:"Users_userLocation__1HR9W",userAvatar:"Users_userAvatar__1GjnO",btn:"Users_btn__3Q4G4"}},26:function(e,t,a){e.exports={pageNumber:"Paginator_pageNumber__adzV4",active:"Paginator_active__1oJPn",pagination:"Paginator_pagination__xXp9h",arrow:"Paginator_arrow__27VT4"}},27:function(e,t,a){e.exports={form:"Login_form__2mxGC",error:"Login_error__34Kpn",btn:"Login_btn__2ffgj",captcha:"Login_captcha__3YL5n"}},29:function(e,t,a){e.exports={form:"ProfileDataForm_form__1qOMW",error:"ProfileDataForm_error__2G2kd",btnGroup:"ProfileDataForm_btnGroup__e6le8",btn:"ProfileDataForm_btn__xDlSU"}},30:function(e,t,a){e.exports={header:"Header_header__upHct",loginBtn:"Header_loginBtn__3XWDG",login:"Header_login__1YO0_",logOut:"Header_logOut__2SP3w"}},37:function(e,t,a){e.exports={posts_form:"Posts_posts_form__3t5_n",textarea:"Posts_textarea__2fxBs",btn:"Posts_btn__QDWB5"}},43:function(e,t,a){e.exports={post:"Post_post__1rRBH",postMessage:"Post_postMessage__yrQzw"}},44:function(e,t,a){e.exports={error:"Error404_error__12OcP",type:"Error404_type__3y6tJ",btn:"Error404_btn__punK9"}},58:function(e,t,a){e.exports={circle2:"Preloader_circle2__m2twK",spin2:"Preloader_spin2__3gYd9"}},59:function(e,t,a){},60:function(e,t,a){e.exports={contact:"Contact_contact__2uTGD"}},67:function(e,t,a){},7:function(e,t,a){e.exports={dialogs:"Messages_dialogs__1dwUa","dialog-items":"Messages_dialog-items__2blon",dialog:"Messages_dialog__21rpG",active:"Messages_active__4Nwxa",messages:"Messages_messages__2wwsG",inputForm:"Messages_inputForm__3YSVv",message:"Messages_message__22yeN",message_avatar:"Messages_message_avatar__EJm45",message_body:"Messages_message_body__1OM21",message_author:"Messages_message_author__1opSs",message_text:"Messages_message_text__Ay6sQ",message_time:"Messages_message_time__6M1QV",textarea:"Messages_textarea__BAVzt",btn:"Messages_btn__3Tad2"}},92:function(e,t,a){"use strict";a.r(t);var s,n=a(0),r=a(31),o=a.n(r),i=a(13),c=a(14),u=a(16),l=a(15),d=(a(67),a(22)),p=a.n(d),b=a(6),j=a(1),m=function(){return Object(j.jsxs)("nav",{className:p.a.nav,children:[Object(j.jsx)("div",{className:p.a.nav_item,children:Object(j.jsx)(b.b,{to:"/profile",activeClassName:p.a.active,children:"Profile"})}),Object(j.jsx)("div",{className:p.a.nav_item,children:Object(j.jsx)(b.b,{to:"/messages",activeClassName:p.a.active,children:"Messages"})}),Object(j.jsx)("div",{className:p.a.nav_item,children:Object(j.jsx)(b.b,{to:"/users",activeClassName:p.a.active,children:"Users"})})]})},O=a(25),f=a(2);!function(e){e.SEND_MESSAGE="MESSAGES/SEND_MESSAGE"}(s||(s={}));var h={dialogs:[{id:1,name:"Ilya"},{id:2,name:"Oleg"},{id:3,name:"Mihail"},{id:4,name:"Andrey"},{id:5,name:"Evgeniy"}],messages:[{id:1,message:"Hello world!"},{id:2,message:"How are you?"},{id:3,message:"I am fine, thank you"}]},g=a(7),_=a.n(g),v=Object(n.memo)((function(e){var t=e.id,a=e.name,s="/messages/"+t;return Object(j.jsx)("div",{className:_.a.dialog,children:Object(j.jsx)(b.b,{to:s,activeClassName:_.a.active,children:a})})})),x=Object(n.memo)((function(e){var t=e.message;return Object(j.jsxs)("div",{className:_.a.message,children:[Object(j.jsxs)("div",{className:_.a.message_body,children:[Object(j.jsx)("div",{className:_.a.message_author,children:"Ilya"}),Object(j.jsx)("div",{className:_.a.message_text,children:t}),Object(j.jsx)("div",{className:_.a.message_time,children:"4:20"})]}),Object(j.jsx)("div",{className:_.a.message_avatar,children:Object(j.jsx)("img",{src:"https://cdn1.flamp.ru/96a74d31e6bd619a8f381c27ef308a76.png",alt:"avatar"})})]})})),S=a(20),E=Object(n.memo)((function(e){var t=e.dialogs,a=e.messages,s=e.sendMessage,n=Object(S.a)({initialValues:{message:""},validate:function(e){var t={};return e.message||(t.message="Required"),t},onSubmit:function(e){n.resetForm(),s(e.message)}});return Object(j.jsxs)("div",{className:_.a.dialogs,children:[Object(j.jsx)("div",{className:_.a.dialogItems,children:t&&t.map((function(e){return Object(j.jsx)(v,{name:e.name,id:e.id},e.id)}))}),Object(j.jsxs)("div",{className:_.a.messages,children:[a&&a.map((function(e){return Object(j.jsx)(x,{message:e.message},e.id)})),Object(j.jsxs)("form",{className:_.a.inputForm,onSubmit:n.handleSubmit,children:[Object(j.jsx)("textarea",Object(f.a)(Object(f.a)({className:_.a.textarea},n.getFieldProps("message")),{},{rows:5})),Object(j.jsx)("button",{className:_.a.btn,type:"submit",children:"Send"})]})]})]})})),P=a(5),N=a(12),U=a(62),y=a(3);var A,T=function(e){return{isAuth:e.auth.isAuth}},C=Object(n.memo)((function(e){var t=e.dialogs,a=e.messages,s=e.sendMessage;return Object(j.jsx)(E,{dialogs:t,messages:a,sendMessage:s})})),I=Object(N.c)(Object(P.b)((function(e){return{dialogs:e.messagesPage.dialogs,messages:e.messagesPage.messages}}),{sendMessage:function(e){return{type:s.SEND_MESSAGE,payload:{message:e}}}}),(function(e){return Object(P.b)(T)((function(t){var a=t.isAuth,s=Object(U.a)(t,["isAuth"]);return a?Object(j.jsx)(e,Object(f.a)({},s)):Object(j.jsx)(y.a,{to:"/login"})}))}))(C),w=a(23),F=a.n(w),L=a.p+"static/media/user.f5a52c39.png",R=a(36),k=a(26),M=a.n(k),G=Object(n.memo)((function(e){for(var t=e.totalItemsCount,a=e.pageSize,s=e.currentPage,r=e.onPageChanged,o=e.portionSize,i=Math.ceil(t/a),c=[],u=1;u<=i;u++)c.push(u);var l=Math.ceil(i/o),d=Object(n.useState)(1),p=Object(R.a)(d,2),b=p[0],m=p[1],O=(b-1)*o+1,f=b*o;return Object(j.jsxs)("div",{className:M.a.pagination,children:[b>1&&Object(j.jsx)("div",{className:M.a.arrow,onClick:function(){return m(b-1)},children:"<"}),c.filter((function(e){return e>=O&&e<=f})).map((function(e){return Object(j.jsx)("div",{onClick:function(){return r(e)},className:"".concat(M.a.pageNumber," ").concat(s===e?M.a.active:""),children:e},e)})),l>b&&Object(j.jsx)("div",{className:M.a.arrow,onClick:function(){return m(b+1)},children:">"})]})})),D=Object(n.memo)((function(e){var t=e.users,a=e.unfollow,s=e.follow,n=e.currentPage,r=e.onPageChanged,o=e.followingInProgress,i=e.totalUsersCount,c=e.pageSize;return Object(j.jsxs)("div",{children:[t&&t.map((function(e){return Object(j.jsxs)("div",{className:F.a.user,children:[Object(j.jsxs)("div",{className:F.a.userAvatar,children:[Object(j.jsx)(b.b,{to:"/profile/"+e.id,children:Object(j.jsx)("img",{src:e.photos.small?e.photos.small:L,alt:"user-avatar"})}),e.followed?Object(j.jsx)("button",{onClick:function(){return a(e.id)},disabled:o.some((function(t){return t===e.id})),className:F.a.btn,children:"Unfollow"}):Object(j.jsx)("button",{onClick:function(){return s(e.id)},disabled:o.some((function(t){return t===e.id})),className:F.a.btn,children:"Follow"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(b.b,{to:"/profile/"+e.id,className:F.a.userName,children:e.name}),Object(j.jsx)("div",{className:F.a.userStatus,children:e.status})]})]},e.id)})),Object(j.jsx)(G,{totalItemsCount:i,pageSize:c,currentPage:n,onPageChanged:r,portionSize:10})]})})),H=a(57),J=a.n(H).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"fb1b255d-daf2-447b-9658-1df546c81b09"}}),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return J.get("users?page=".concat(e,"&count=").concat(t))},W=function(e){return J.post("follow/".concat(e))},B=function(e){return J.delete("follow/".concat(e))},V=function(){return J.get("auth/me")},Q=function(e,t,a,s){return J.post("auth/login",{email:e,password:t,rememberMe:a,captcha:s})},Y=function(){return J.delete("auth/login")},Z=function(e){return J.get("profile/".concat(e))},q=function(e){return J.get("profile/status/".concat(e))},X=function(e){return J.put("profile/status",{status:e})},K=function(e){var t=new FormData;return t.append("image",e),J.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},$=function(e){return J.put("profile",e)},ee=function(){return J.get("security/get-captcha-url")};!function(e){e.FOLLOW_USER="USERS/FOLLOW_USER",e.UNFOLLOW_USER="USERS/UNFOLLOW_USER",e.SET_USERS="USERS/SET_USERS",e.SET_TOTAL_USERS_COUNT="USERS/SET_TOTAL_COUNT",e.CHANGE_CURRENT_PAGE="USERS/CHANGE_CURRENT_PAGE",e.TOGGLE_IS_FETCHING="USERS/TOGGLE_IS_FETCHING",e.TOGGLE_IS_FOLLOWING_PROGRESS="USERS/TOGGLE_IS_FOLLOWING_PROGRESS"}(A||(A={}));var te,ae={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},se=function(e){return{type:A.SET_TOTAL_USERS_COUNT,payload:{totalUsersCount:e}}},ne=function(e){return{type:A.TOGGLE_IS_FETCHING,payload:{isFetching:e}}},re=function(e,t){return{type:A.TOGGLE_IS_FOLLOWING_PROGRESS,payload:{isFetching:e,userId:t}}},oe=a(58),ie=a.n(oe),ce=function(){return Object(j.jsx)("div",{className:ie.a.circle2})},ue=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.changeCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){0===this.props.users.length&&this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,s=t.totalUsersCount,n=t.pageSize,r=t.currentPage,o=t.isFetching,i=t.followingInProgress;return Object(j.jsxs)(j.Fragment,{children:[o&&Object(j.jsx)(ce,{}),Object(j.jsx)(D,{users:a,follow:function(t){e.props.follow(t)},unfollow:function(t){e.props.unfollow(t)},totalUsersCount:s,pageSize:n,currentPage:r,onPageChanged:this.onPageChanged,followingInProgress:i})]})}}]),a}(n.PureComponent),le=Object(N.c)(Object(P.b)((function(e){return{users:e.users.users,totalUsersCount:e.users.totalUsersCount,pageSize:e.users.pageSize,currentPage:e.users.currentPage,isFetching:e.users.isFetching,followingInProgress:e.users.followingInProgress}}),{follow:function(e){return function(t){t(re(!0,e)),W(e).then((function(a){0===a.data.resultCode&&t(function(e){return{type:A.FOLLOW_USER,payload:{userId:e}}}(e)),t(re(!1,e))}))}},unfollow:function(e){return function(t){t(re(!0,e)),B(e).then((function(a){0===a.data.resultCode&&t(function(e){return{type:A.UNFOLLOW_USER,payload:{userId:e}}}(e)),t(re(!1,e))}))}},changeCurrentPage:function(e){return{type:A.CHANGE_CURRENT_PAGE,payload:{currentPage:e}}},setTotalUsersCount:se,getUsers:function(e,t){return function(a){a(ne(!0)),z(e,t).then((function(e){var t;a((t=e.data.items,{type:A.SET_USERS,payload:{users:t}})),a(se(e.data.totalCount)),a(ne(!1))}))}}}))(ue),de=a(59),pe=a.n(de),be=a(17),je=a.n(be),me=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={editMode:!1,status:e.props.status},e.onEditMode=function(){e.setState({editMode:!0})},e.offEditMode=function(){e.setState({editMode:!1}),e.props.updateUserStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(j.jsx)("div",{className:je.a.status,children:this.state.editMode&&this.props.isOwner?Object(j.jsx)("input",{className:je.a.statusInput,type:"text",value:this.state.status,onBlur:this.offEditMode,onChange:this.onStatusChange,autoFocus:!0}):Object(j.jsx)("div",{onClick:this.onEditMode,children:this.props.status||"Set status..."})})}}]),a}(n.PureComponent),Oe=a(60),fe=a.n(Oe),he=Object(n.memo)((function(e){var t=e.socialName,a=e.value;return a?Object(j.jsx)("div",{children:Object(j.jsxs)("a",{href:a,className:fe.a.contact,children:[t," "]})}):null})),ge=Object(n.memo)((function(e){var t=e.profile,a=e.status,s=e.onEditModeClick,n=e.isOwner,r=e.updateUserStatus;return Object(j.jsxs)("div",{className:je.a.profileInfo,children:[Object(j.jsxs)("div",{className:je.a.avatar,children:[Object(j.jsx)("img",{src:t.photos.small?t.photos.small:L,alt:"avatar"}),t.lookingForAJob&&Object(j.jsx)("div",{className:je.a.lookingForAJob,children:"Looking For A Job!"}),t.lookingForAJobDescription&&Object(j.jsx)("div",{className:je.a.lookingForAJobDescription,children:t.lookingForAJobDescription}),n&&Object(j.jsx)("button",{onClick:function(){return s(!0)},children:"Edit profile"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:je.a.fullName,children:t.fullName}),Object(j.jsx)(me,{status:a,updateUserStatus:r,isOwner:n}),Object(j.jsxs)("div",{className:je.a.descr,children:[Object(j.jsxs)("div",{children:["About me: ",Object(j.jsx)("span",{children:t.aboutMe})]}),Object(j.jsx)("div",{children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return Object(j.jsx)(he,{socialName:e,value:t.contacts[e]},e)}))]})]})]})})),_e=a(29),ve=a.n(_e);!function(e){e.ADD_POST="PROFILE/ADD_POST",e.SET_USER_PROFILE="PROFILE/SET_USER_PROFILE",e.SET_STATUS="PROFILE/SET_STATUS",e.UPDATE_USER_PHOTO="PROFILE/UPDATE_USER_PHOTO"}(te||(te={}));var xe,Se={profile:{aboutMe:"",contacts:{facebook:"",website:"",vk:"",twitter:"",instagram:"",youtube:"",github:"",mainLink:""},lookingForAJob:!1,lookingForAJobDescription:"",fullName:"",userId:0,photos:{small:"",large:""}},posts:[{id:1,message:"Hello World!"},{id:2,message:"=^.^="},{id:3,message:"Cat)0))"}],status:""},Ee=function(e){return{type:te.SET_STATUS,payload:{status:e}}},Pe=function(e){return function(t){Z(e).then((function(e){var a;t((a=e.data,{type:te.SET_USER_PROFILE,payload:{profile:a}}))}))}},Ne=Object(n.memo)((function(e){var t=e.savePhoto,a=e.profile,s=e.updateUserProfile,n=e.setEditMode,r=Object(S.a)({initialValues:{fullName:a.fullName,aboutMe:a.aboutMe,lookingForAJob:a.lookingForAJob,lookingForAJobDescription:a.lookingForAJobDescription,contacts:{facebook:a.contacts.facebook,website:a.contacts.website,vk:a.contacts.vk,twitter:a.contacts.twitter,instagram:a.contacts.instagram,youtube:a.contacts.youtube,github:a.contacts.github,mainLink:a.contacts.mainLink}},onSubmit:function(e){s(e),n(!1)}});return Object(j.jsxs)("form",{className:ve.a.form,onSubmit:r.handleSubmit,children:[Object(j.jsxs)("label",{children:["My photo:",Object(j.jsx)("input",{type:"file",onChange:function(e){e.currentTarget.files&&t(e.currentTarget.files[0])}})]}),Object(j.jsxs)("label",{children:["Full name:",Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:"fullName"},r.getFieldProps("fullName")))]}),Object(j.jsxs)("label",{children:["About me:",Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:"aboutMe"},r.getFieldProps("aboutMe")))]}),Object(j.jsxs)("label",{children:["Looking for a job",Object(j.jsx)("input",{type:"checkbox",onChange:r.handleChange,checked:r.values.lookingForAJob,name:"lookingForAJob"})]}),Object(j.jsxs)("label",{children:["My skills:",Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:"Looking for a job description"},r.getFieldProps("lookingForAJobDescription")))]}),Object.keys(a.contacts).map((function(e){return Object(j.jsxs)("label",{children:[e[0].toUpperCase()+e.slice(1),":",Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:e},r.getFieldProps("contacts.".concat(e))))]},e)})),Object(j.jsxs)("div",{className:ve.a.btnGroup,children:[Object(j.jsx)("button",{className:ve.a.btn,type:"submit",children:"Save"}),Object(j.jsx)("button",{className:ve.a.btn,type:"button",onClick:function(){return n(!1)},children:"Back"})]})]})})),Ue=Object(P.b)(null,{updateUserProfile:function(e){return function(t,a){var s=a().auth.id;$(e).then((function(e){0===e.data.resultCode&&t(Pe(s))}))}}})(Ne),ye=Object(n.memo)((function(e){var t=e.profile,a=e.status,s=e.updateUserStatus,r=e.isOwner,o=e.savePhoto,i=Object(n.useState)(!1),c=Object(R.a)(i,2),u=c[0],l=c[1];return Object(j.jsx)(j.Fragment,{children:u?Object(j.jsx)(Ue,{profile:t,savePhoto:o,setEditMode:l}):Object(j.jsx)(ge,{profile:t,status:a,updateUserStatus:s,onEditModeClick:l,isOwner:r})})})),Ae=a(43),Te=a.n(Ae),Ce=Object(n.memo)((function(e){var t=e.message;return Object(j.jsxs)("div",{className:Te.a.post,children:[Object(j.jsx)("img",{src:"https://cdn1.flamp.ru/96a74d31e6bd619a8f381c27ef308a76.png",alt:"avatar"}),Object(j.jsx)("div",{className:Te.a.postMessage,children:t})]})})),Ie=a(37),we=a.n(Ie),Fe=Object(n.memo)((function(e){var t=e.posts,a=e.addPost,s=Object(S.a)({initialValues:{message:""},validate:function(e){var t={};return e.message||(t.message="Required"),e.message.length>140&&(t.message="Post length must not be more than 140 characters"),t},onSubmit:function(e){s.resetForm(),a(e.message)}});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:"My posts"}),Object(j.jsxs)("form",{className:we.a.posts_form,onSubmit:s.handleSubmit,children:[Object(j.jsx)("textarea",Object(f.a)(Object(f.a)({},s.getFieldProps("message")),{},{className:we.a.textarea,placeholder:"Your news..."})),Object(j.jsx)("button",{className:we.a.btn,type:"submit",children:"Add post"})]}),t&&t.map((function(e){return Object(j.jsx)(Ce,{message:e.message},e.id)}))]})})),Le=Object(n.memo)((function(e){var t=e.posts,a=e.addPost;return Object(j.jsx)(Fe,{posts:t,addPost:a})})),Re=Object(P.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:function(e){return{type:te.ADD_POST,payload:{message:e}}}})(Le),ke=Object(n.memo)((function(e){var t=e.profile,a=e.status,s=e.updateUserStatus,n=e.isOwner,r=e.savePhoto;return Object(j.jsxs)("div",{className:pe.a.profile,children:[Object(j.jsx)(ye,{profile:t,status:a,updateUserStatus:s,isOwner:n,savePhoto:r}),Object(j.jsx)(Re,{})]})})),Me=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile.userId?Object(j.jsx)(ke,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}):Object(j.jsx)(ce,{})}}]),a}(n.PureComponent),Ge=Object(N.c)(Object(P.b)((function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth,status:e.profilePage.status,authUserId:e.auth.id}}),{getUserProfile:Pe,getUserStatus:function(e){return function(t){q(e).then((function(e){t(Ee(e.data))}))}},updateUserStatus:function(e){return function(t){X(e).then((function(a){0===a.data.resultCode&&t(Ee(e))}))}},savePhoto:function(e){return function(t){K(e).then((function(e){var a,s;0===e.data.resultCode&&t((a=e.data.data.photos.small,s=e.data.data.photos.large,{type:te.UPDATE_USER_PHOTO,payload:{small:a,large:s}}))}))}}}),y.g)(Me),De=a(30),He=a.n(De),Je=Object(n.memo)((function(e){var t=e.isAuth,a=e.login,s=e.logout;return Object(j.jsxs)("header",{className:He.a.header,children:[Object(j.jsx)("div",{children:"<logo/>"}),t?Object(j.jsxs)("div",{className:He.a.login,children:[a,Object(j.jsx)("div",{className:He.a.logOut,onClick:s,children:"Log out"})]}):Object(j.jsx)(b.b,{to:"/login",className:He.a.loginBtn,children:"Login"})]})}));!function(e){e.SET_AUTH_USER="AUTH/SET_AUTH_USER",e.GET_CAPTCHA_URL="AUTH/GET_CAPTCHA_URL"}(xe||(xe={}));var ze,We={id:0,login:"",email:"",isAuth:!1,captchaUrl:""},Be=function(e,t,a,s){return{type:xe.SET_AUTH_USER,payload:{id:e,login:t,email:a,isAuth:s}}},Ve=function(){return function(e){return V().then((function(t){var a=t.data.data,s=a.id,n=a.login,r=a.email;0===t.data.resultCode&&e(Be(s,n,r,!0))}))}},Qe=function(){return function(e){return ee().then((function(t){var a,s=t.data.url;e((a=s,{type:xe.GET_CAPTCHA_URL,payload:{captchaUrl:a}}))}))}},Ye=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(j.jsx)(Je,{isAuth:this.props.isAuth,login:this.props.login,logout:this.props.logout})}}]),a}(n.PureComponent),Ze=Object(P.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(e){Y().then((function(t){0===t.data.resultCode&&e(Be(0,"","",!1))}))}}})(Ye),qe=a(27),Xe=a.n(qe),Ke=Object(n.memo)((function(e){var t=e.login,a=e.isAuth,s=e.captchaUrl,n=Object(S.a)({initialValues:{email:"",password:"",rememberMe:!1,captcha:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password&&e.password.length<=2&&(t.password="Password length must be more than two"):t.password="Required",t},onSubmit:function(e){t(e.email,e.password,e.rememberMe,e.captcha),n.resetForm()}});return a?Object(j.jsx)(y.a,{to:"/profile"}):Object(j.jsxs)("form",{className:Xe.a.form,onSubmit:n.handleSubmit,children:[Object(j.jsx)("div",{children:"ACCOUNT LOGIN"}),Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:"E-mail"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(j.jsx)("div",{className:Xe.a.error,children:n.errors.email}):null,Object(j.jsx)("input",Object(f.a)({type:"password",placeholder:"Password"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(j.jsx)("div",{className:Xe.a.error,children:n.errors.password}):null,s?Object(j.jsxs)("div",{className:Xe.a.captcha,children:[Object(j.jsx)("img",{src:s,alt:"captcha"}),Object(j.jsx)("input",Object(f.a)({type:"text",placeholder:"Enter captcha"},n.getFieldProps("captcha")))]}):null,Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",onChange:n.handleChange,checked:n.values.rememberMe,name:"rememberMe"}),"remember me"]}),Object(j.jsx)("button",{className:Xe.a.btn,type:"submit",children:"LOG IN"})]})})),$e=Object(P.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,s){return function(n){Q(e,t,a,s).then((function(e){0===e.data.resultCode&&n(Ve()),10===e.data.resultCode&&n(Qe())}))}}})(Ke);!function(e){e.INITIALIZED_SUCCESS="APP/INITIALIZED_SUCCESS"}(ze||(ze={}));var et={initialized:!1},tt=a(44),at=a.n(tt),st=function(){return Object(j.jsxs)("div",{className:at.a.error,children:[Object(j.jsx)("h1",{children:"Error 404"}),Object(j.jsx)(b.b,{to:"/profile",children:Object(j.jsx)("div",{className:at.a.btn,children:"to profile"})})]})},nt=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(Ze,{}),Object(j.jsx)(m,{}),Object(j.jsx)("div",{className:"app-content-wrapper",children:Object(j.jsxs)(y.d,{children:[Object(j.jsx)(y.b,{path:"/",exact:!0,render:function(){return Object(j.jsx)(y.a,{to:"/profile"})}}),Object(j.jsx)(y.b,{path:"/profile/:userId?",render:function(){return Object(j.jsx)(Ge,{})}}),Object(j.jsx)(y.b,{path:"/messages",render:function(){return Object(j.jsx)(I,{})}}),Object(j.jsx)(y.b,{path:"/users",render:function(){return Object(j.jsx)(le,{})}}),Object(j.jsx)(y.b,{path:"/login",render:function(){return Object(j.jsx)($e,{})}}),Object(j.jsx)(y.b,{render:function(){return Object(j.jsx)(st,{})}})]})})]}):Object(j.jsx)(ce,{})}}]),a}(n.PureComponent),rt=Object(P.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(Ve()).then((function(){e({type:ze.INITIALIZED_SUCCESS,payload:{initialized:!0}})}))}}})(nt),ot=a(61),it=Object(N.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze.INITIALIZED_SUCCESS:return Object(f.a)(Object(f.a)({},e),t.payload);default:return e}},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.ADD_POST:return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(O.a)(e.posts),[Object(f.a)({id:5},t.payload)])});case te.SET_USER_PROFILE:case te.SET_STATUS:return Object(f.a)(Object(f.a)({},e),t.payload);case te.UPDATE_USER_PHOTO:return Object(f.a)(Object(f.a)({},e),{},{profile:Object(f.a)(Object(f.a)({},e.profile),{},{photos:Object(f.a)({},t.payload)})});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.SEND_MESSAGE:return Object(f.a)(Object(f.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[Object(f.a)({id:6},t.payload)])});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.FOLLOW_USER:return Object(f.a)(Object(f.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userId?Object(f.a)(Object(f.a)({},e),{},{followed:!0}):e}))});case A.UNFOLLOW_USER:return Object(f.a)(Object(f.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userId?Object(f.a)(Object(f.a)({},e),{},{followed:!1}):e}))});case A.SET_USERS:case A.SET_TOTAL_USERS_COUNT:case A.CHANGE_CURRENT_PAGE:case A.TOGGLE_IS_FETCHING:return Object(f.a)(Object(f.a)({},e),t.payload);case A.TOGGLE_IS_FOLLOWING_PROGRESS:return Object(f.a)(Object(f.a)({},e),{},{followingInProgress:t.payload.isFetching?[].concat(Object(O.a)(e.followingInProgress),[t.payload.userId]):e.followingInProgress.filter((function(e){return e!==t.payload.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe.SET_AUTH_USER:case xe.GET_CAPTCHA_URL:return Object(f.a)(Object(f.a)({},e),t.payload);default:return e}}}),ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||N.c,ut=Object(N.d)(it,ct(Object(N.a)(ot.a)));window.store=ut,o.a.render(Object(j.jsx)(b.a,{children:Object(j.jsx)(P.a,{store:ut,children:Object(j.jsx)(rt,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.2ff065b1.chunk.js.map